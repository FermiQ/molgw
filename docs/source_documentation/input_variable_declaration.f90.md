# `input_variable_declaration.f90`

## Overview

This Fortran source file contains the declarations for a multitude of input variables used by the MOLGW software package. Its primary purpose is to define the data type (integer, real, character, logical) and attributes (specifically `protected`) for these variables. This file is automatically generated by an external Python script, `input_variables.py`, and direct manual edits are discouraged as they would be overwritten. These declarations are intended to be incorporated into a Fortran module, making the input variables available throughout the MOLGW program in a controlled manner. The generation date is noted as "19 March 2025".

## Key Components

This file does not define executable code blocks like subroutines or functions. It consists entirely of Fortran variable declaration statements. These statements are designed to be placed within the declaration section of a Fortran module.

Key features of the declarations:
*   **Data Types**: Variables are declared as `real(dp)`, `integer`, `character(len=...)`, or `logical`. `dp` is assumed to be a kind parameter for double-precision real numbers, defined elsewhere in the MOLGW source.
*   **`protected` Attribute**: All variables are declared with the `protected` attribute. This means that if these declarations are part of a module, routines using the module can read these variables but cannot directly modify them. Modification is typically handled by dedicated input-processing routines within the same module.
*   **Paired Character and Logical Variables**: Many input options appear as a pair:
    *   A `character(len=3)` variable (e.g., `auto_occupation`) intended to store user input like "yes" or "no".
    *   A corresponding `logical` variable with a trailing underscore (e.g., `auto_occupation_`) which holds the parsed boolean state (`.true.` or `.false.`) of the character variable.

Example declarations:
```fortran
real(dp), protected :: auto_auxil_fsam
integer, protected :: auto_auxil_lmaxinc
character(len=3), protected :: auto_occupation
logical, protected :: auto_occupation_
character(len=256), protected :: comment
! ... and many more variables
```

## Important Variables/Constants

All variables declared in this file are input parameters that control the execution of MOLGW calculations. There are no constants defined in this file; rather, it *declares* the variables that will hold input values. Some categories of variables include:

*   **SCF parameters**: `scf`, `complex_scf`, `tolforce`, `nscf`, `alpha_mixing`, etc.
*   **Relativistic corrections**: `x2c`, `c_speedlight`, `approx_H_x2c`.
*   **Basis set and grid parameters**: `basis_path`, `cube_nx`, `grid_memory`, `gaussian_type`.
*   **Output and printing controls**: `print_cube`, `print_wfn`, `print_yaml`, `yaml_output`.
*   **Post-SCF (GW, BSE, TDDFT) parameters**: `analytic_chi`, `nomega_sigma`, `postscf`, `tda`, `time_sim`.
*   **NOFT parameters**: `noft_functional`, `noft_nscf`, `noft_tolE`.
*   **Geometry and system definition**: `charge`, `electric_field_x`, `magnetization`, `natom`, `xyz_file`.

The `_` suffix on logical variables (e.g., `x2c_`) indicates they are the boolean counterparts to character-based inputs (e.g., `x2c`).

## Usage Examples

This file's content is not directly "used" by calling functions. Instead, it is incorporated into a Fortran module. Other parts of MOLGW would then `USE` this module to gain access to these input variables.

A conceptual example of how this file's content would fit into a module:

```fortran
! In a file like 'molgw_input_vars_module.f90'
module molgw_input_variables_module
  use iso_fortran_env, only: REAL64 ! Assuming dp corresponds to REAL64
  implicit none
  private

  ! Define dp, or import it
  integer, parameter :: dp = REAL64

  ! --- Content from input_variable_declaration.f90 starts here ---
  real(dp), protected :: auto_auxil_fsam
  integer, protected :: auto_auxil_lmaxinc
  character(len=3), protected :: auto_occupation
  logical, protected :: auto_occupation_
  ! ... (all other declarations from the file) ...
  character(len=256), protected :: xyz_file
  ! --- Content from input_variable_declaration.f90 ends here ---

  ! Publicize variables that need to be accessed from outside the module
  public :: auto_auxil_fsam, auto_auxil_lmaxinc, auto_occupation, auto_occupation_
  ! ... (public statements for all other variables) ...
  public :: xyz_file

contains

  subroutine initialize_and_read_inputs(input_file_path)
    character(len=*), intent(in) :: input_file_path
    ! This subroutine would:
    ! 1. Set default values for all declared input variables.
    ! 2. Open and read the user's input file (input_file_path).
    ! 3. Parse the values and update the module variables.
    ! 4. For 'yes'/'no' type inputs, it would set both the character version 
    !    (e.g., auto_occupation) and its logical counterpart (e.g., auto_occupation_).
    !    Example:
    !    auto_occupation = 'yes' ! From input file
    !    auto_occupation_ = .true. ! Parsed value
  end subroutine initialize_and_read_inputs

  ! Function to convert "yes" or "no" to logical, used by initialize_and_read_inputs
  function string_to_logical(str_val) result(log_val)
    character(len=*), intent(in) :: str_val
    logical :: log_val
    character(len=10) :: temp_str
    temp_str = ADJUSTL(LOWER(TRIM(str_val))) ! Normalize: lowercase, left-justified, no extra spaces
    if (temp_str == 'yes' .or. temp_str == 'true') then
      log_val = .true.
    else
      log_val = .false.
    endif
  end function string_to_logical

end module molgw_input_variables_module
```

## Dependencies and Interactions

*   **`input_variables.py`**: This external Python script is responsible for generating the content of `input_variable_declaration.f90`.
*   **Fortran Module System**: The declarations are designed for use within a Fortran module. The `protected` attribute is a feature of module variables.
*   **`dp` Kind Parameter**: The `real(dp)` declarations rely on `dp` being defined as a kind parameter for double-precision floating-point numbers. This is typically done using `selected_real_kind` from `iso_fortran_env` or by defining `dp = REAL64`.
*   **MOLGW Core Logic**: The variables declared in this file are fundamental to controlling nearly all aspects of MOLGW's computational procedures. They are read and used by various subroutines and functions throughout the codebase.
*   **Input Processing Routines**: Dedicated routines within MOLGW (likely within the same module that houses these declarations) are responsible for reading user input (e.g., from a file), parsing it, and populating these variables with their runtime values. These routines would also handle the conversion from character-based inputs (like "yes"/"no") to their logical counterparts.

```
